<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Testing &mdash; Iris 1.11.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.11.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Iris 1.11.0 documentation" href="../index.html" />
    <link rel="up" title="Iris developer guide" href="index.html" />
    <link rel="next" title="Deprecations" href="deprecations.html" />
    <link rel="prev" title="Pull Request Check List" href="pulls.html" />
 
    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
    <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE"> 

    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <script type="text/javascript" src="https://docs.python.org/2/_static/copybutton.js"></script>

  </head>
  <body>
<div style="background-color: white; text-align: left; padding: 1px 10px 1px 15px">
<p style="margin-left: 15px; font-weight:bolder; letter-spacing:0.1ex;">
<a href="../index.html"><img src="../_static/Iris7_1_trim_100.png" width=101 height=100 border="0" style="vertical-align:middle" alt="Logo"/></a>
<span style="font-size: 400%; vertical-align:middle"> Iris 1.11 </span>
</p>

</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="deprecations.html" title="Deprecations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pulls.html" title="Pull Request Check List"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../contents.html">contents</a>|&nbsp;</li>

          <li><a href="index.html" accesskey="U">Iris developer guide</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Testing</a><ul>
<li><a class="reference internal" href="#unit-tests">Unit tests</a><ul>
<li><a class="reference internal" href="#classes">Classes</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#integration-tests">Integration tests</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pulls.html"
                        title="previous chapter">Pull Request Check List</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="deprecations.html"
                        title="next chapter">Deprecations</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/developers_guide/tests.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="testing">
<h1>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h1>
<dl class="docutils">
<dt>There are three categories of tests within Iris:</dt>
<dd><ul class="first last simple">
<li>Unit tests</li>
<li>Integration tests</li>
<li>Legacy tests</li>
</ul>
</dd>
</dl>
<p>Ideally, all code changes should be accompanied by one or more unit
tests, and by zero or more integration tests. And where possible, new
tests should not be added to the legacy tests.</p>
<p>But if in any doubt about what tests to add or how to write them please
feel free to submit a pull-request in any state and ask for assistance.</p>
<div class="section" id="unit-tests">
<h2>Unit tests<a class="headerlink" href="#unit-tests" title="Permalink to this headline">¶</a></h2>
<p>Code changes should be accompanied by enough unit tests to give a
high degree of confidence that the change works as expected. In
addition, the unit tests can help describe the intent behind a change.</p>
<p>The docstring for each test module must state the unit under test.
For example:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">&quot;&quot;&quot;Unit</span> <span class="pre">tests</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">`iris.experimental.raster.export_geotiff`</span> <span class="pre">function.&quot;&quot;&quot;</span></tt></div></blockquote>
<p>All unit tests must be placed and named according to the following
structure:</p>
<div class="section" id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<p>When testing a class all the tests must reside in the module:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">lib/iris/tests/unit/&lt;fully/qualified/module&gt;/test_&lt;ClassName&gt;.py</span></tt></div></blockquote>
<p>Within this test module each tested method must have one or more
corresponding test classes:
- Either: <cite>Test_name_of_public_method</cite>
- Or: <cite>Test_name_of_public_method__aspect_of_method</cite></p>
<p>And within those test classes, the test methods must be named according
to the aspect of the tested method which they address.</p>
<p><strong>Examples</strong>:</p>
<p>All unit tests for <a class="reference internal" href="../iris/iris/cube.html#iris.cube.Cube" title="iris.cube.Cube"><tt class="xref py py-class docutils literal"><span class="pre">iris.cube.Cube</span></tt></a> must reside in:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">lib/iris/tests/unit/cube/test_Cube.py</span></tt></div></blockquote>
<p>Within that file the tests might look something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Tests for the Cube.xml() method.</span>
<span class="k">class</span> <span class="nc">Test_xml</span><span class="p">(</span><span class="n">tests</span><span class="o">.</span><span class="n">IrisTest</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_some_general_stuff</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

<span class="c"># Tests for the Cube.xml() method, focussing on the behaviour of</span>
<span class="c"># the checksums.</span>
<span class="k">class</span> <span class="nc">Test_xml__checksum</span><span class="p">(</span><span class="n">tests</span><span class="o">.</span><span class="n">IrisTest</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_checksum_ignores_masked_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

<span class="c"># Tests for the Cube.add_dim_coord() method.</span>
<span class="k">class</span> <span class="nc">Test_add_dim_coord</span><span class="p">(</span><span class="n">tests</span><span class="o">.</span><span class="n">IrisTest</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_normal_usage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">test_coord_already_present</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<p>When testing a function all the tests must reside in the module:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">lib/iris/tests/unit/&lt;fully/qualified/module&gt;/test_&lt;function_name&gt;.py</span></tt></div></blockquote>
<p>Within this test module there must be one or more test classes:
- Either: <cite>Test</cite>
- Or: <cite>TestAspectOfFunction</cite></p>
<p>And within those test classes, the test methods must be named according
to the aspect of the tested function which they address.</p>
<p><strong>Examples</strong>:</p>
<p>All unit tests for <a class="reference internal" href="../iris/iris/experimental/raster.html#iris.experimental.raster.export_geotiff" title="iris.experimental.raster.export_geotiff"><tt class="xref py py-func docutils literal"><span class="pre">iris.experimental.raster.export_geotiff()</span></tt></a>
must reside in:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">lib/iris/tests/unit/experimental/raster/test_export_geotiff.py</span></tt></div></blockquote>
<p>Within that file the tests might look something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Tests focussing on the handling of different data types.</span>
<span class="k">class</span> <span class="nc">TestDtypeAndValues</span><span class="p">(</span><span class="n">tests</span><span class="o">.</span><span class="n">IrisTest</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_int16</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">test_int16_big_endian</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

<span class="c"># Tests focussing on the handling of different projections.</span>
<span class="k">class</span> <span class="nc">TestProjection</span><span class="p">(</span><span class="n">tests</span><span class="o">.</span><span class="n">IrisTest</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_no_ellipsoid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="integration-tests">
<h2>Integration tests<a class="headerlink" href="#integration-tests" title="Permalink to this headline">¶</a></h2>
<p>Some code changes may require tests which exercise several units in
order to demonstrate an important consequence of their interaction which
may not be apparent when considering the units in isolation.</p>
<p>These tests must be placed in the <cite>lib/iris/tests/integration</cite> folder.
Unlike unit tests, there is no fixed naming scheme for integration
tests. But folders and files must be created as required to help
developers locate relevant tests. It is recommended they are named
according to the capabilities under test, e.g.
<cite>metadata/test_pp_preservation.py</cite>, and not named according to the
module(s) under test.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="deprecations.html" title="Deprecations"
             >next</a> |</li>
        <li class="right" >
          <a href="pulls.html" title="Pull Request Check List"
             >previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../contents.html">contents</a>|&nbsp;</li>

          <li><a href="index.html" >Iris developer guide</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
    <p style="text-align: left; float: left; margin: 0px; padding: 0 0 0 5px;">Documentation licensed under the <a href="http://reference.data.gov.uk/id/open-government-licence" rel="license">Open Government Licence</a></p>
        &copy; <a href="../copyright.html">British Crown Copyright</a> 2010 - 2014, Met Office
    </div>


  <!-- Include a version switcher to easily move between the documentation of different versions -->
  <script type=text/javascript src=/iris/docs/version_switch.js></script>
  </body>
</html>