<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>iris.analysis.calculus &mdash; Iris 1.11.0 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.11.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="top" title="Iris 1.11.0 documentation" href="../../../index.html" />
    <link rel="up" title="iris.analysis" href="../analysis.html" />
    <link rel="next" title="iris.analysis.cartography" href="cartography.html" />
    <link rel="prev" title="iris.analysis" href="../analysis.html" />
 
    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
    <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE"> 

    <link rel="stylesheet" href="../../../_static/style.css" type="text/css" />
    <script type="text/javascript" src="https://docs.python.org/2/_static/copybutton.js"></script>

  </head>
  <body>
<div style="background-color: white; text-align: left; padding: 1px 10px 1px 15px">
<p style="margin-left: 15px; font-weight:bolder; letter-spacing:0.1ex;">
<a href="../../../index.html"><img src="../../../_static/Iris7_1_trim_100.png" width=101 height=100 border="0" style="vertical-align:middle" alt="Logo"/></a>
<span style="font-size: 400%; vertical-align:middle"> Iris 1.11 </span>
</p>

</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="cartography.html" title="iris.analysis.cartography"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../analysis.html" title="iris.analysis"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../index.html">home</a>|&nbsp;</li>
        <li><a href="../../../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../../../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../../../contents.html">contents</a>|&nbsp;</li>

          <li><a href="../../iris.html" >Iris reference documentation</a> &raquo;</li>
          <li><a href="../analysis.html" accesskey="U">iris.analysis</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../analysis.html"
                        title="previous chapter">iris.analysis</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="cartography.html"
                        title="next chapter">iris.analysis.cartography</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/iris/iris/analysis/calculus.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="iris-analysis-calculus">
<span id="id1"></span><h1>iris.analysis.calculus<a class="headerlink" href="#iris-analysis-calculus" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-iris.analysis.calculus"></span><p>Calculus operations on <a class="reference internal" href="../cube.html#iris.cube.Cube" title="iris.cube.Cube"><tt class="xref py py-class docutils literal"><span class="pre">iris.cube.Cube</span></tt></a> instances.</p>
<p>See also: <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/index.html#module-numpy" title="(in NumPy v1.11)"><tt class="xref py py-mod docutils literal"><span class="pre">NumPy</span></tt></a>.</p>
<p>In this module:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#iris.analysis.calculus.cube_delta" title="iris.analysis.calculus.cube_delta"><tt class="xref py py-obj docutils literal"><span class="pre">cube_delta</span></tt></a></li>
<li><a class="reference internal" href="#iris.analysis.calculus.differentiate" title="iris.analysis.calculus.differentiate"><tt class="xref py py-obj docutils literal"><span class="pre">differentiate</span></tt></a></li>
<li><a class="reference internal" href="#iris.analysis.calculus.curl" title="iris.analysis.calculus.curl"><tt class="xref py py-obj docutils literal"><span class="pre">curl</span></tt></a></li>
</ul>
</div></blockquote>
<dl class="function">
<dt id="iris.analysis.calculus.cube_delta">
<tt class="descclassname">iris.analysis.calculus.</tt><tt class="descname">cube_delta</tt><big>(</big><em>cube</em>, <em>coord</em><big>)</big><a class="headerlink" href="#iris.analysis.calculus.cube_delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a cube calculate the difference between each value in the
given coord&#8217;s direction.</p>
<p>Args:</p>
<ul>
<li><dl class="first docutils">
<dt>coord</dt>
<dd><p class="first last">either a Coord instance or the unique name of a coordinate in the cube.
If a Coord instance is provided, it does not necessarily have to
exist in the cube.</p>
</dd>
</dl>
</li>
</ul>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">change_in_temperature_wrt_pressure</span> <span class="o">=</span> <span class="n">cube_delta</span><span class="p">(</span><span class="n">temperature_cube</span><span class="p">,</span> <span class="s">&#39;pressure&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Missing data support not yet implemented.</p>
</div>
</dd></dl>

<p class="hr_p"><a href="#">&uarr;&#32&#32 top &#32&#32&uarr;</a></p>
<!--<hr class="docutils" />
--><dl class="function">
<dt id="iris.analysis.calculus.differentiate">
<tt class="descclassname">iris.analysis.calculus.</tt><tt class="descname">differentiate</tt><big>(</big><em>cube</em>, <em>coord_to_differentiate</em><big>)</big><a class="headerlink" href="#iris.analysis.calculus.differentiate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the differential of a given cube with respect to the
coord_to_differentiate.</p>
<p>Args:</p>
<ul>
<li><dl class="first docutils">
<dt>coord_to_differentiate:</dt>
<dd><p class="first last">Either a Coord instance or the unique name of a coordinate which
exists in the cube.
If a Coord instance is provided, it does not necessarily have to
exist on the cube.</p>
</dd>
</dl>
</li>
</ul>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">u_wind_acceleration</span> <span class="o">=</span> <span class="n">differentiate</span><span class="p">(</span><span class="n">u_wind_cube</span><span class="p">,</span> <span class="s">&#39;forecast_time&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The algorithm used is equivalent to:</p>
<img src="../../../_images/mathmpl/math-ac108f9e00.png" class="center" /><p>Where <tt class="docutils literal"><span class="pre">d</span></tt> is the differential, <tt class="docutils literal"><span class="pre">v</span></tt> is the data value, <tt class="docutils literal"><span class="pre">c</span></tt> is
the coordinate value and <tt class="docutils literal"><span class="pre">i</span></tt> is the index in the differential
direction. Hence, in a normal situation if a cube has a shape
(x: n; y: m) differentiating with respect to x will result in a cube
of shape (x: n-1; y: m) and differentiating with respect to y will
result in (x: n; y: m-1). If the coordinate to differentiate is
<a class="reference internal" href="../coords.html#iris.coords.DimCoord.circular" title="iris.coords.DimCoord.circular"><tt class="xref py py-attr docutils literal"><span class="pre">circular</span></tt></a> then the resultant
shape will be the same as the input cube.</p>
<p>In the returned cube the <cite>coord_to_differentiate</cite> object is
redefined such that the output coordinate values are set to the
averages of the original coordinate values (i.e. the mid-points).
Similarly, the output lower bounds values are set to the averages of
the original lower bounds values and the output upper bounds values
are set to the averages of the original upper bounds values. In more
formal terms:</p>
<ul class="simple">
<li><cite>C[i] = (c[i] + c[i+1]) / 2</cite></li>
<li><cite>B[i, 0] = (b[i, 0] + b[i+1, 0]) / 2</cite></li>
<li><cite>B[i, 1] = (b[i, 1] + b[i+1, 1]) / 2</cite></li>
</ul>
<p>where <cite>c</cite> and <cite>b</cite> represent the input coordinate values and bounds,
and <cite>C</cite> and <cite>B</cite> the output coordinate values and bounds.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Difference method used is the same as <a class="reference internal" href="#iris.analysis.calculus.cube_delta" title="iris.analysis.calculus.cube_delta"><tt class="xref py py-func docutils literal"><span class="pre">cube_delta()</span></tt></a></p>
</div>
<p>and therefore has the same limitations.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Spherical differentiation does not occur in this routine.</p>
</div>
</dd></dl>

<p class="hr_p"><a href="#">&uarr;&#32&#32 top &#32&#32&uarr;</a></p>
<!--<hr class="docutils" />
--><dl class="function">
<dt id="iris.analysis.calculus.curl">
<tt class="descclassname">iris.analysis.calculus.</tt><tt class="descname">curl</tt><big>(</big><em>i_cube</em>, <em>j_cube</em>, <em>k_cube=None</em>, <em>ignore=None</em><big>)</big><a class="headerlink" href="#iris.analysis.calculus.curl" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the 2-dimensional or 3-dimensional spherical or cartesian
curl of the given vector of cubes.</p>
<p>As well as the standard x and y coordinates, this function requires each
cube to possess a vertical or z-like coordinate (representing some form
of height or pressure).  This can be a scalar or dimension coordinate.</p>
<p>Args:</p>
<ul>
<li><dl class="first docutils">
<dt>i_cube</dt>
<dd><p class="first last">The i cube of the vector to operate on</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>j_cube</dt>
<dd><p class="first last">The j cube of the vector to operate on</p>
</dd>
</dl>
</li>
</ul>
<p>Kwargs:</p>
<ul>
<li><dl class="first docutils">
<dt>k_cube</dt>
<dd><p class="first last">The k cube of the vector to operate on</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ignore</dt>
<dd><p class="first">This argument is not used.</p>
<div class="last deprecated">
<p><span class="versionmodified">Deprecated since version 0.8: </span>The coordinates to ignore are determined automatically.</p>
</div>
</dd>
</dl>
</li>
</ul>
<p>Return (i_cmpt_curl_cube, j_cmpt_curl_cube, k_cmpt_curl_cube)</p>
<p>If the k-cube is not passed in then the 2-dimensional curl will
be calculated, yielding the result: [None, None, k_cube].
If the k-cube is passed in, the 3-dimensional curl will
be calculated, returning 3 component cubes.</p>
<p>All cubes passed in must have the same data units, and those units
must be spatially-derived (e.g. &#8216;m/s&#8217; or &#8216;km/h&#8217;).</p>
<p>The calculation of curl is dependent on the type of
<a class="reference internal" href="../coord_systems.html#iris.coord_systems.CoordSystem" title="iris.coord_systems.CoordSystem"><tt class="xref py py-func docutils literal"><span class="pre">CoordSystem()</span></tt></a> in the cube.
If the <a class="reference internal" href="../coord_systems.html#iris.coord_systems.CoordSystem" title="iris.coord_systems.CoordSystem"><tt class="xref py py-func docutils literal"><span class="pre">CoordSystem()</span></tt></a> is either
GeogCS or RotatedGeogCS, the spherical curl will be calculated; otherwise
the cartesian curl will be calculated:</p>
<blockquote>
<div><p>Cartesian curl</p>
<blockquote>
<div><p>When cartesian calculus is used, i_cube is the u component,
j_cube is the v component and k_cube is the w component.</p>
<p>The Cartesian curl is defined as:</p>
<img src="../../../_images/mathmpl/math-0891b450a9.png" class="center" /></div></blockquote>
<p>Spherical curl</p>
<blockquote>
<div><p>When spherical calculus is used, i_cube is the <img src="../../../_images/mathmpl/math-e22cc525ec.png" style="position: relative; bottom: -7px"/> vector
component (e.g. eastward), j_cube is the <img src="../../../_images/mathmpl/math-5dc8912759.png" style="position: relative; bottom: -3px"/> component
(e.g. northward) and k_cube is the radial component.</p>
<p>The spherical curl is defined as:</p>
<img src="../../../_images/mathmpl/math-b10cb386a5.png" class="center" /><p>where phi is longitude, theta is latitude.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="cartography.html" title="iris.analysis.cartography"
             >next</a> |</li>
        <li class="right" >
          <a href="../analysis.html" title="iris.analysis"
             >previous</a> |</li>
        <li><a href="../../../index.html">home</a>|&nbsp;</li>
        <li><a href="../../../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../../../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../../../contents.html">contents</a>|&nbsp;</li>

          <li><a href="../../iris.html" >Iris reference documentation</a> &raquo;</li>
          <li><a href="../analysis.html" >iris.analysis</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
    <p style="text-align: left; float: left; margin: 0px; padding: 0 0 0 5px;">Documentation licensed under the <a href="http://reference.data.gov.uk/id/open-government-licence" rel="license">Open Government Licence</a></p>
        &copy; <a href="../../../copyright.html">British Crown Copyright</a> 2010 - 2014, Met Office
    </div>


  <!-- Include a version switcher to easily move between the documentation of different versions -->
  <script type=text/javascript src=/iris/docs/version_switch.js></script>
  </body>
</html>