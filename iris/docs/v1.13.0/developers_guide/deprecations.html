<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Deprecations &#8212; Iris 1.13.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.13.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Iris 1.13.0 documentation" href="../contents.html" />
    <link rel="up" title="Iris developer guide" href="index.html" />
    <link rel="next" title="Releases" href="release.html" />
    <link rel="prev" title="Testing" href="tests.html" />
 
    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
    <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE"> 

    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <script type="text/javascript" src="http://docs.python.org/2/_static/copybutton.js"></script>

  </head>
  <body role="document">
<div style="background-color: white; text-align: left; padding: 1px 10px 1px 15px">
<p style="margin-left: 15px; font-weight:bolder; letter-spacing:0.1ex;">
<a href="../index.html"><img src="../_static/Iris7_1_trim_100.png" width=101 height=100 border="0" style="vertical-align:middle" alt="Logo"/></a>
<span style="font-size: 400%; vertical-align:middle"> Iris 1.13 </span>
</p>

</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="release.html" title="Releases"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tests.html" title="Testing"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../contents.html">contents</a>|&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Iris developer guide</a> &#187;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Deprecations</a><ul>
<li><a class="reference internal" href="#adding-a-deprecation">Adding a deprecation</a><ul>
<li><a class="reference internal" href="#removing-a-public-api">Removing a public API</a></li>
<li><a class="reference internal" href="#changing-a-default">Changing a default</a></li>
</ul>
</li>
<li><a class="reference internal" href="#removing-a-deprecation">Removing a deprecation</a><ul>
<li><a class="reference internal" href="#id3">Removing a public API</a></li>
<li><a class="reference internal" href="#iris-developer-future">Changing a default</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tests.html"
                        title="previous chapter">Testing</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="release.html"
                        title="next chapter">Releases</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/developers_guide/deprecations.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="deprecations">
<span id="iris-development-deprecations"></span><h1>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h1>
<p>If you need to make a backwards-incompatible change to a public API
<a class="footnote-reference" href="#public-api" id="id1">[1]</a> that has been included in a release (e.g. deleting a
method), then you must first deprecate the old behaviour in at least
one release, before removing/updating it in the next
<a class="reference external" href="http://semver.org/">major release</a>.</p>
<div class="section" id="adding-a-deprecation">
<h2>Adding a deprecation<a class="headerlink" href="#adding-a-deprecation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="removing-a-public-api">
<span id="id2"></span><h3>Removing a public API<a class="headerlink" href="#removing-a-public-api" title="Permalink to this headline">¶</a></h3>
<p>The simplest form of deprecation occurs when you need to remove a public
API. The public API in question is deprecated for a period before it is
removed to allow time for user code to be updated. Sometimes the
deprecation is accompanied by the introduction of a new public API.</p>
<p>Under these circumstances the following points apply:</p>
<blockquote>
<div><ul class="simple">
<li>Using the deprecated API must result in a concise deprecation warning which
is an instance of <a class="reference internal" href="../iris/iris.html#iris.IrisDeprecation" title="iris.IrisDeprecation"><code class="xref py py-class docutils literal"><span class="pre">iris.IrisDeprecation</span></code></a>.
It is easiest to call
<code class="xref py py-func docutils literal"><span class="pre">iris._deprecation.warn_deprecated()</span></code>, which is a
simple wrapper to <a class="reference external" href="https://docs.python.org/2.7/library/warnings.html#warnings.warn" title="(in Python v2.7)"><code class="xref py py-func docutils literal"><span class="pre">warnings.warn()</span></code></a> with the signature
<cite>warn_deprecation(message, **kwargs)</cite>.</li>
</ul>
</div></blockquote>
<ul>
<li><dl class="first docutils">
<dt>Where possible, your deprecation warning should include advice on</dt>
<dd><p class="first last">how to avoid using the deprecated API. For example, you might
reference a preferred API, or more detailed documentation elsewhere.</p>
</dd>
</dl>
</li>
</ul>
<blockquote>
<div><ul>
<li><p class="first">You must update the docstring for the deprecated API to include a
Sphinx deprecation directive:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">..</span> <span class="pre">deprecated::</span> <span class="pre">&lt;VERSION&gt;</span></code></p>
</div></blockquote>
<p>where you should replace <cite>&lt;VERSION&gt;</cite> with the major and minor version
of Iris in which this API is first deprecated. For example: <cite>1.8</cite>.</p>
<p>As with the deprecation warning, you should include advice on how to
avoid using the deprecated API within the content of this directive.
Feel free to include more detail in the updated docstring than in the
deprecation warning.</p>
</li>
<li><p class="first">You should check the documentation for references to the deprecated
API and update them as appropriate.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="changing-a-default">
<h3>Changing a default<a class="headerlink" href="#changing-a-default" title="Permalink to this headline">¶</a></h3>
<p>When you need to change the default behaviour of a public API the
situation is slightly more complex. The recommended solution is to use
the <a class="reference internal" href="../iris/iris.html#iris.FUTURE" title="iris.FUTURE"><code class="xref py py-data docutils literal"><span class="pre">iris.FUTURE</span></code></a> object. The <a class="reference internal" href="../iris/iris.html#iris.FUTURE" title="iris.FUTURE"><code class="xref py py-data docutils literal"><span class="pre">iris.FUTURE</span></code></a> object provides
boolean attributes that allow user code to control at run-time the
default behaviour of corresponding public APIs. When a boolean attribute
is set to <cite>False</cite> it causes the corresponding public API to use its
deprecated default behaviour. When a boolean attribute is set to <cite>True</cite>
it causes the corresponding public API to use its new default behaviour.</p>
<p>The following points apply in addition to those for removing a public
API:</p>
<blockquote>
<div><ul class="simple">
<li>You should add a new boolean attribute to <a class="reference internal" href="../iris/iris.html#iris.FUTURE" title="iris.FUTURE"><code class="xref py py-data docutils literal"><span class="pre">iris.FUTURE</span></code></a> (by
modifying <a class="reference internal" href="../iris/iris.html#iris.Future" title="iris.Future"><code class="xref py py-class docutils literal"><span class="pre">iris.Future</span></code></a>) that controls the default behaviour
of the public API that needs updating. The initial state of the new
boolean attribute should be <cite>False</cite>. You should name the new boolean
attribute to indicate that setting it to <cite>True</cite> will select the new
default behaviour.</li>
<li>You should include a reference to this <a class="reference internal" href="../iris/iris.html#iris.FUTURE" title="iris.FUTURE"><code class="xref py py-data docutils literal"><span class="pre">iris.FUTURE</span></code></a> flag in your
deprecation warning and corresponding Sphinx deprecation directive.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="removing-a-deprecation">
<h2>Removing a deprecation<a class="headerlink" href="#removing-a-deprecation" title="Permalink to this headline">¶</a></h2>
<p>When the time comes to make a new major release you should locate any
deprecated APIs within the code that satisfy the one release
minimum period described previously. Locating deprecated APIs can easily
be done by searching for the Sphinx deprecation directives and/or
deprecation warnings.</p>
<div class="section" id="id3">
<h3>Removing a public API<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>The deprecated API should be removed and any corresponding documentation
and/or example code should be removed/updated as appropriate.</p>
</div>
<div class="section" id="iris-developer-future">
<span id="id4"></span><h3>Changing a default<a class="headerlink" href="#iris-developer-future" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>You should update the initial state of the relevant boolean attribute
of <a class="reference internal" href="../iris/iris.html#iris.FUTURE" title="iris.FUTURE"><code class="xref py py-data docutils literal"><span class="pre">iris.FUTURE</span></code></a> to <cite>True</cite>.</li>
<li>You should deprecate setting the relevant boolean attribute of
<a class="reference internal" href="../iris/iris.html#iris.Future" title="iris.Future"><code class="xref py py-class docutils literal"><span class="pre">iris.Future</span></code></a> in the same way as described in
<a class="reference internal" href="#removing-a-public-api"><span class="std std-ref">Removing a public API</span></a>.</li>
</ul>
</div></blockquote>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="public-api" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><p class="first">A name without a leading underscore in any of its
components, with the exception of the <a class="reference internal" href="../iris/iris/experimental.html#module-iris.experimental" title="iris.experimental"><code class="xref py py-mod docutils literal"><span class="pre">iris.experimental</span></code></a> and
<code class="xref py py-mod docutils literal"><span class="pre">iris.tests</span></code> packages.</p>
<dl class="last docutils">
<dt>Example public names are:</dt>
<dd><ul class="first last simple">
<li><cite>iris.this.</cite></li>
<li><cite>iris.this.that</cite></li>
</ul>
</dd>
<dt>Example private names are:</dt>
<dd><ul class="first last simple">
<li><cite>iris._this</cite></li>
<li><cite>iris.this._that</cite></li>
<li><cite>iris._this.that</cite></li>
<li><cite>iris._this._that</cite></li>
<li><cite>iris.experimental.something</cite></li>
<li><cite>iris.tests.get_data_path</cite></li>
</ul>
</dd>
</dl>
</td></tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="release.html" title="Releases"
             >next</a> |</li>
        <li class="right" >
          <a href="tests.html" title="Testing"
             >previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../contents.html">contents</a>|&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="index.html" >Iris developer guide</a> &#187;</li> 
      </ul>
    </div>

    <div class="footer">
    <p style="text-align: left; float: left; margin: 0px; padding: 0 0 0 5px;">Documentation licensed under the <a href="http://reference.data.gov.uk/id/open-government-licence" rel="license">Open Government Licence</a></p>
        &copy; <a href="../copyright.html">British Crown Copyright</a> 2010 - 2014, Met Office
    </div>


  </body>
</html>