
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>What’s new in Iris 1.0 &#8212; Iris 2.0.0rc1 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0rc1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Iris examples" href="../examples/index.html" />
    <link rel="prev" title="What’s new in Iris 1.1" href="1.1.html" />
 
    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
    <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE"> 

    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <script type="text/javascript" src="http://docs.python.org/2/_static/copybutton.js"></script>

  </head>
  <body>
<div style="background-color: white; text-align: left; padding: 1px 10px 1px 15px">
<p style="margin-left: 15px; font-weight:bolder; letter-spacing:0.1ex;">
<a href="../index.html"><img src="../_static/Iris7_1_trim_100.png" width=101 height=100 border="0" style="vertical-align:middle" alt="Logo"/></a>
<span style="font-size: 400%; vertical-align:middle"> Iris 2.0 </span>
</p>

</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../examples/index.html" title="Iris examples"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="1.1.html" title="What’s new in Iris 1.1"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../contents.html">contents</a>|&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">What’s new in Iris</a> &#187;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">What’s new in Iris 1.0</a><ul>
<li><a class="reference internal" href="#the-role-of-1-x">The role of 1.x</a></li>
<li><a class="reference internal" href="#iris-1-0-features">Iris 1.0 features</a><ul>
<li><a class="reference internal" href="#incompatible-changes">Incompatible changes</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cf-netcdf-coordinate-systems">CF-netCDF coordinate systems</a></li>
<li><a class="reference internal" href="#using-cartopy-for-mapping-in-matplotlib">Using Cartopy for mapping in matplotlib</a></li>
<li><a class="reference internal" href="#hybrid-pressure">Hybrid-pressure</a></li>
<li><a class="reference internal" href="#netcdf">NetCDF</a></li>
<li><a class="reference internal" href="#brewer-colour-palettes">Brewer colour palettes</a><ul>
<li><a class="reference internal" href="#citations">Citations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#metadata-attributes">Metadata attributes</a></li>
<li><a class="reference internal" href="#new-loading-functions">New loading functions</a></li>
<li><a class="reference internal" href="#cube-projection">Cube projection</a></li>
<li><a class="reference internal" href="#other-changes">Other changes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="1.1.html"
                        title="previous chapter">What’s new in Iris 1.1</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../examples/index.html"
                        title="next chapter">Iris examples</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/whatsnew/1.0.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="what-s-new-in-iris-1-0">
<h1>What’s new in Iris 1.0<a class="headerlink" href="#what-s-new-in-iris-1-0" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Release:</th><td class="field-body">1.0.0</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">15 Oct, 2012</td>
</tr>
</tbody>
</table>
<p>This document explains the new/changed features of Iris in version 1.0.
(<a class="reference internal" href="index.html"><span class="doc">View all changes</span></a>.)</p>
<p>With the release of Iris 1.0, we have broadly completed the transition
to the CF data model, and established a stable foundation for future
work. Following this release we plan to deliver significant performance
improvements and additional features.</p>
<div class="section" id="the-role-of-1-x">
<h2>The role of 1.x<a class="headerlink" href="#the-role-of-1-x" title="Permalink to this headline">¶</a></h2>
<p>The 1.x series of releases is intended to provide a relatively stable,
backwards-compatible platform based on the CF-netCDF data model, upon
which long-lived services can be built.</p>
<p>Iris 1.0 targets the data model implicit in CF-netCDF 1.5. This will be
extended to cover the new features of CF-netCDF 1.6 (e.g. discrete
sampling geometries) and any subsequent versions which maintain
backwards compatibility. Similarly, as the efforts of the CF community
to formalise their data model reach maturity, they will be included
in Iris where significant backwards-compatibility can be maintained.</p>
</div>
<div class="section" id="iris-1-0-features">
<h2>Iris 1.0 features<a class="headerlink" href="#iris-1-0-features" title="Permalink to this headline">¶</a></h2>
<p>A summary of the main features added with version 1.0:</p>
<ul class="simple">
<li>Hybrid-pressure vertical coordinates, and the ability to load from GRIB.</li>
<li>Initial support for CF-style coordinate systems.</li>
<li>Use of Cartopy for mapping in matplotlib.</li>
<li>Load data from NIMROD files.</li>
<li>Availability of Cynthia Brewer colour palettes.</li>
<li>Add a citation to a plot.</li>
<li>Ensures netCDF files are properly closed.</li>
<li>The ability to bypass merging when loading data.</li>
<li>Save netCDF files with an unlimited dimension.</li>
<li>A more explicit set of load functions, which also allow the automatic
cube merging to be bypassed as a last resort.</li>
<li>The ability to project a cube with a lat-lon or rotated lat-lon coordinate
system into a range of map projections e.g. Polar Stereographic.</li>
</ul>
<div class="section" id="incompatible-changes">
<h3>Incompatible changes<a class="headerlink" href="#incompatible-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The “source” and “history” metadata are now represented as Cube
attributes, where previously they used coordinates.</li>
<li><a class="reference internal" href="../iris/iris/cube.html#iris.cube.Cube.coord_dims" title="iris.cube.Cube.coord_dims"><code class="xref py py-meth docutils literal"><span class="pre">iris.cube.Cube.coord_dims()</span></code></a> now returns a tuple instead of a list.</li>
<li>The <code class="docutils literal"><span class="pre">iris.plot.gcm</span></code> and <code class="docutils literal"><span class="pre">iris.plot.map_setup</span></code> functions are now removed.
See <a class="reference internal" href="#whats-new-cartopy"><span class="std std-ref">Using Cartopy for mapping in matplotlib</span></a> for further details.</li>
</ul>
</div>
<div class="section" id="deprecations">
<h3>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The methods <code class="xref py py-meth docutils literal"><span class="pre">iris.coords.Coord.cos()</span></code> and
<code class="xref py py-meth docutils literal"><span class="pre">iris.coords.Coord.sin()</span></code> have been deprecated.</li>
<li>The <code class="xref py py-func docutils literal"><span class="pre">iris.load_strict()</span></code> function has been deprecated. Code
should now use the <a class="reference internal" href="../iris/iris.html#iris.load_cube" title="iris.load_cube"><code class="xref py py-func docutils literal"><span class="pre">iris.load_cube()</span></code></a> and
<a class="reference internal" href="../iris/iris.html#iris.load_cubes" title="iris.load_cubes"><code class="xref py py-func docutils literal"><span class="pre">iris.load_cubes()</span></code></a> functions instead.</li>
</ul>
</div>
</div>
<div class="section" id="cf-netcdf-coordinate-systems">
<h2>CF-netCDF coordinate systems<a class="headerlink" href="#cf-netcdf-coordinate-systems" title="Permalink to this headline">¶</a></h2>
<p>The coordinate systems in Iris are now defined by the CF-netCDF
<a class="reference external" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/apf.html">grid mappings</a>.
As of Iris 1.0 a subset of the CF-netCDF coordinate systems are
supported, but this will be expanded in subsequent versions. Adding
this code is a relatively simple, incremental process - it would make a
good task to tackle for users interested in getting involved in
contributing to the project.</p>
<p>The coordinate systems available in Iris 1.0 and their corresponding
Iris classes are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="68%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">CF name</th>
<th class="head">Iris class</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/apf.html#idp7779520">Latitude-longitude</a></td>
<td><a class="reference internal" href="../iris/iris/coord_systems.html#iris.coord_systems.GeogCS" title="iris.coord_systems.GeogCS"><code class="xref py py-class docutils literal"><span class="pre">GeogCS</span></code></a></td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/apf.html#idp7844592">Rotated pole</a></td>
<td><a class="reference internal" href="../iris/iris/coord_systems.html#iris.coord_systems.RotatedGeogCS" title="iris.coord_systems.RotatedGeogCS"><code class="xref py py-class docutils literal"><span class="pre">RotatedGeogCS</span></code></a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/apf.html#idp7872672">Transverse Mercator</a></td>
<td><a class="reference internal" href="../iris/iris/coord_systems.html#iris.coord_systems.TransverseMercator" title="iris.coord_systems.TransverseMercator"><code class="xref py py-class docutils literal"><span class="pre">TransverseMercator</span></code></a></td>
</tr>
</tbody>
</table>
<p>For convenience, Iris also includes the <a class="reference internal" href="../iris/iris/coord_systems.html#iris.coord_systems.OSGB" title="iris.coord_systems.OSGB"><code class="xref py py-class docutils literal"><span class="pre">OSGB</span></code></a>
class which provides a simple way to create the transverse Mercator
coordinate system used by the British
<a class="reference external" href="http://www.ordnancesurvey.co.uk/">Ordnance Survey</a>.</p>
</div>
<div class="section" id="using-cartopy-for-mapping-in-matplotlib">
<span id="whats-new-cartopy"></span><h2>Using Cartopy for mapping in matplotlib<a class="headerlink" href="#using-cartopy-for-mapping-in-matplotlib" title="Permalink to this headline">¶</a></h2>
<p>The underlying map drawing package has now been updated to use
<a class="reference external" href="http://scitools.github.com/cartopy">Cartopy</a>. Cartopy provides a
highly flexible set of mapping tools, with a consistent, intuitive
interface. As yet it doesn’t have feature-parity with basemap, but its
goal is to make maps “just work”, making it the perfect complement to Iris.</p>
<p>The <code class="docutils literal"><span class="pre">iris.plot.map_setup</span></code> function has now been replaced with a cleaner
interface:</p>
<blockquote>
<div><ul>
<li><p class="first">To draw a cube on its native map project, one can simply draw the cube directly:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">iris.plot</span> <span class="kn">as</span> <span class="nn">iplt</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">iplt</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">cube</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first">To draw a cube on the native map and extents of another, one can use the
<a class="reference internal" href="../iris/iris/plot.html#iris.plot.default_projection" title="iris.plot.default_projection"><code class="xref py py-func docutils literal"><span class="pre">iris.plot.default_projection()</span></code></a> and
<a class="reference internal" href="../iris/iris/plot.html#iris.plot.default_projection_extent" title="iris.plot.default_projection_extent"><code class="xref py py-func docutils literal"><span class="pre">iris.plot.default_projection_extent()</span></code></a> functions:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">iris.plot</span> <span class="kn">as</span> <span class="nn">iplt</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">cube1_projection</span> <span class="o">=</span> <span class="n">iplt</span><span class="o">.</span><span class="n">default_projection</span><span class="p">(</span><span class="n">cube1</span><span class="p">)</span>
<span class="n">cube1_extent</span> <span class="o">=</span> <span class="n">iplt</span><span class="o">.</span><span class="n">default_projection_extent</span><span class="p">(</span><span class="n">cube1</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">cube1_projection</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">(</span><span class="n">cube1_extent</span><span class="p">,</span> <span class="n">cube1_projection</span><span class="p">)</span>
<span class="n">iplt</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">cube2</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">iris.plot.gcm</span></code> function to get the current map is now
redundant; instead the current map <em>is</em> the current matplotlib axes,
and <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.gca.html#matplotlib.pyplot.gca" title="(in Matplotlib v2.1.1)"><code class="xref py py-func docutils literal"><span class="pre">matplotlib.pyplot.gca()</span></code></a> should be used instead.</p>
</div>
<p>For more examples of what can be done with Cartopy, see the Iris gallery and
<a class="reference external" href="http://scitools.github.com/cartopy">Cartopy’s documentation</a>.</p>
</div>
<div class="section" id="hybrid-pressure">
<h2>Hybrid-pressure<a class="headerlink" href="#hybrid-pressure" title="Permalink to this headline">¶</a></h2>
<p>With the introduction of the <a class="reference internal" href="../iris/iris/aux_factory.html#iris.aux_factory.HybridPressureFactory" title="iris.aux_factory.HybridPressureFactory"><code class="xref py py-class docutils literal"><span class="pre">HybridPressureFactory</span></code></a>
class, it is now possible to represent data expressed on a
hybrid-pressure vertical coordinate, as defined by the second variant in
<a class="reference external" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/apd.html#idp7406304">Appendix D</a>.
A hybrid-pressure factory is created with references to the coordinates
which provide the components of the hybrid coordinate (“ap” and “b”) and
the surface pressure. In return, it provides a virtual “pressure”
coordinate whose values are derived from the given components.</p>
<p>This facility is utilised by the GRIB2 loader to automatically provide
the derived “pressure” coordinate for certain data <a class="footnote-reference" href="#f1" id="id1">[1]</a> from the
<a class="reference external" href="http://www.ecmwf.int/">ECMWF</a>.</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Where the level type is either 105 or 119, and where the
surface pressure has an ECMWF paramId of
<a class="reference external" href="http://www.ecmwf.int/publications/manuals/d/gribapi/param/detail/format=grib2/pid=152/">152</a>.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="netcdf">
<h2>NetCDF<a class="headerlink" href="#netcdf" title="Permalink to this headline">¶</a></h2>
<p>When saving a Cube to a netCDF file, Iris will now define the outermost
dimension as an unlimited/record dimension. In combination with the
<a class="reference internal" href="../iris/iris/cube.html#iris.cube.Cube.transpose" title="iris.cube.Cube.transpose"><code class="xref py py-meth docutils literal"><span class="pre">iris.cube.Cube.transpose()</span></code></a> method, this allows any dimension to
take the role of the unlimited/record dimension.</p>
<p>For example, a Cube with the structure:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">iris</span> <span class="s1">&#39;Cube&#39;</span> <span class="n">of</span> <span class="n">air_potential_temperature</span> <span class="p">(</span><span class="n">time</span><span class="p">:</span> <span class="mi">6</span><span class="p">;</span> <span class="n">model_level_number</span><span class="p">:</span> <span class="mi">70</span><span class="p">;</span> <span class="n">grid_latitude</span><span class="p">:</span> <span class="mi">100</span><span class="p">;</span> <span class="n">grid_longitude</span><span class="p">:</span> <span class="mi">100</span><span class="p">)</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>would result in a netCDF file whose CDL definition would include:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dimensions</span><span class="p">:</span>
        <span class="n">time</span> <span class="o">=</span> <span class="n">UNLIMITED</span> <span class="p">;</span> <span class="o">//</span> <span class="p">(</span><span class="mi">6</span> <span class="n">currently</span><span class="p">)</span>
        <span class="n">model_level_number</span> <span class="o">=</span> <span class="mi">70</span> <span class="p">;</span>
        <span class="n">grid_latitude</span> <span class="o">=</span> <span class="mi">100</span> <span class="p">;</span>
        <span class="n">grid_longitude</span> <span class="o">=</span> <span class="mi">100</span> <span class="p">;</span>
</pre></div>
</div>
<p>Also, Iris will now ensure that netCDF files are properly closed when
they are no longer in use. Previously this could cause problems when
dealing with large numbers of netCDF files, or in long running
processes.</p>
</div>
<div class="section" id="brewer-colour-palettes">
<h2>Brewer colour palettes<a class="headerlink" href="#brewer-colour-palettes" title="Permalink to this headline">¶</a></h2>
<p>Iris includes a selection of carefully designed colour palettes produced
by Cynthia Brewer. The <a class="reference internal" href="../iris/iris/palette.html#module-iris.palette" title="iris.palette"><code class="xref py py-mod docutils literal"><span class="pre">iris.palette</span></code></a> module registers the Brewer
colour palettes with matplotlib, so they are explicitly selectable via
the <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.set_cmap.html#matplotlib.pyplot.set_cmap" title="(in Matplotlib v2.1.1)"><code class="xref py py-func docutils literal"><span class="pre">matplotlib.pyplot.set_cmap()</span></code></a> function. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">iris.palette</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">plt</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">set_cmap</span><span class="p">(</span><span class="s1">&#39;brewer_RdBu_11&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="citations">
<h3>Citations<a class="headerlink" href="#citations" title="Permalink to this headline">¶</a></h3>
<p>Citations can easily be added to a plot using the <a class="reference internal" href="../iris/iris/plot.html#iris.plot.citation" title="iris.plot.citation"><code class="xref py py-func docutils literal"><span class="pre">iris.plot.citation()</span></code></a>
function. The recommended text for the Cynthia Brewer citation is provided
by <code class="xref py py-data docutils literal"><span class="pre">iris.plot.BREWER_CITE</span></code>.</p>
<p>To include a reference in a journal article or report please refer to
<a class="reference external" href="http://www.personal.psu.edu/cab38/ColorBrewer/ColorBrewer_updates.html">section 5</a>
in the citation guidance provided by Cynthia Brewer.</p>
</div>
</div>
<div class="section" id="metadata-attributes">
<h2>Metadata attributes<a class="headerlink" href="#metadata-attributes" title="Permalink to this headline">¶</a></h2>
<p>Iris now stores “source” and “history” metadata in Cube attributes.
For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">tests</span><span class="o">.</span><span class="n">stock</span><span class="o">.</span><span class="n">global_pp</span><span class="p">())</span>
<span class="go">air_temperature                     (latitude: 73; longitude: 96)</span>
<span class="go">     ...</span>
<span class="go">     Attributes:</span>
<span class="go">          ...</span>
<span class="go">          source: Data from Met Office Unified Model</span>
<span class="go">     ...</span>
</pre></div>
</div>
<p>Where previously it would have appeared as:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">air_temperature</span>                     <span class="p">(</span><span class="n">latitude</span><span class="p">:</span> <span class="mi">73</span><span class="p">;</span> <span class="n">longitude</span><span class="p">:</span> <span class="mi">96</span><span class="p">)</span>
     <span class="o">...</span>
     <span class="n">Scalar</span> <span class="n">coordinates</span><span class="p">:</span>
          <span class="o">...</span>
          <span class="n">source</span><span class="p">:</span> <span class="n">Data</span> <span class="kn">from</span> <span class="nn">Met</span> <span class="nn">Office</span> <span class="nn">Unified</span> <span class="nn">Model</span>
     <span class="o">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This change breaks backwards compatibility with Iris 0.9. But
if it is desirable to have the “source” metadata expressed as a
coordinate then it can be done with the following pattern:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="n">src</span> <span class="o">=</span> <span class="n">cube</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">)</span>
<span class="n">src_coord</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">AuxCoord</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">long_name</span><span class="o">=</span><span class="s1">&#39;source&#39;</span><span class="p">)</span>
<span class="n">cube</span><span class="o">.</span><span class="n">add_aux_coord</span><span class="p">(</span><span class="n">src_coord</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="new-loading-functions">
<h2>New loading functions<a class="headerlink" href="#new-loading-functions" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>The main functions for loading cubes are now:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="../iris/iris.html#iris.load" title="iris.load"><code class="xref py py-func docutils literal"><span class="pre">iris.load()</span></code></a></li>
<li><a class="reference internal" href="../iris/iris.html#iris.load_cube" title="iris.load_cube"><code class="xref py py-func docutils literal"><span class="pre">iris.load_cube()</span></code></a></li>
<li><a class="reference internal" href="../iris/iris.html#iris.load_cubes" title="iris.load_cubes"><code class="xref py py-func docutils literal"><span class="pre">iris.load_cubes()</span></code></a></li>
</ul>
</dd>
</dl>
<p>These provide convenient cube loading suitable for both interactive
(<a class="reference internal" href="../iris/iris.html#iris.load" title="iris.load"><code class="xref py py-func docutils literal"><span class="pre">iris.load()</span></code></a>) and scripted (<a class="reference internal" href="../iris/iris.html#iris.load_cube" title="iris.load_cube"><code class="xref py py-func docutils literal"><span class="pre">iris.load_cube()</span></code></a>,
<a class="reference internal" href="../iris/iris.html#iris.load_cubes" title="iris.load_cubes"><code class="xref py py-func docutils literal"><span class="pre">iris.load_cubes()</span></code></a>) usage.</p>
<p>In addition, <a class="reference internal" href="../iris/iris.html#iris.load_raw" title="iris.load_raw"><code class="xref py py-func docutils literal"><span class="pre">iris.load_raw()</span></code></a> has been provided as a last resort
for situations where the automatic cube merging is not appropriate.
However, if you find you need to use this function we would encourage
you to contact the Iris developers so we can see if a fix can be made
to the cube merge algorithm.</p>
<p>The <code class="xref py py-func docutils literal"><span class="pre">iris.load_strict()</span></code> function has been deprecated. Code should
now use the <a class="reference internal" href="../iris/iris.html#iris.load_cube" title="iris.load_cube"><code class="xref py py-func docutils literal"><span class="pre">iris.load_cube()</span></code></a> and <a class="reference internal" href="../iris/iris.html#iris.load_cubes" title="iris.load_cubes"><code class="xref py py-func docutils literal"><span class="pre">iris.load_cubes()</span></code></a>
functions instead.</p>
</div>
<div class="section" id="cube-projection">
<h2>Cube projection<a class="headerlink" href="#cube-projection" title="Permalink to this headline">¶</a></h2>
<p>Iris now has the ability to project a cube into a number of map projections.
This functionality is provided by <a class="reference internal" href="../iris/iris/analysis/cartography.html#iris.analysis.cartography.project" title="iris.analysis.cartography.project"><code class="xref py py-func docutils literal"><span class="pre">iris.analysis.cartography.project()</span></code></a>.
For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">iris</span>
<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="kn">as</span> <span class="nn">ccrs</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="c1"># Load data</span>
<span class="n">cube</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load_cube</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;air_temp.pp&#39;</span><span class="p">))</span>

<span class="c1"># Transform cube to target projection</span>
<span class="n">target_proj</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">RotatedPole</span><span class="p">(</span><span class="n">pole_longitude</span><span class="o">=</span><span class="mf">177.5</span><span class="p">,</span>
                               <span class="n">pole_latitude</span><span class="o">=</span><span class="mf">37.5</span><span class="p">)</span>
<span class="n">new_cube</span><span class="p">,</span> <span class="n">extent</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">cartography</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">cube</span><span class="p">,</span> <span class="n">target_proj</span><span class="p">)</span>

<span class="c1"># Plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">target_proj</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">pcolor</span><span class="p">(</span><span class="n">new_cube</span><span class="o">.</span><span class="n">coord</span><span class="p">(</span><span class="s1">&#39;projection_x_coordinate&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">points</span><span class="p">,</span>
           <span class="n">new_cube</span><span class="o">.</span><span class="n">coord</span><span class="p">(</span><span class="s1">&#39;projection_y_coordinate&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">points</span><span class="p">,</span>
           <span class="n">new_cube</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>This function is intended to be used in cases where the cube’s coordinates
prevent one from directly visualising the data, e.g. when the longitude
and latitude are two dimensional and do not make up a regular grid. The
function uses a nearest neighbour approach rather than any form of
linear/non-linear interpolation to determine the data value of each cell
in the resulting cube. Consequently it may have an adverse effect on the
statistics of the data e.g. the mean and standard deviation will not be
preserved. This function currently assumes global data and will if
necessary extrapolate beyond the geographical extent of the source cube.</p>
</div>
<div class="section" id="other-changes">
<h2>Other changes<a class="headerlink" href="#other-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Cube summaries are now more readable when the scalar coordinates
contain bounds.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../examples/index.html" title="Iris examples"
             >next</a> |</li>
        <li class="right" >
          <a href="1.1.html" title="What’s new in Iris 1.1"
             >previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../contents.html">contents</a>|&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="index.html" >What’s new in Iris</a> &#187;</li> 
      </ul>
    </div>

    <div class="footer">
    <p style="text-align: left; float: left; margin: 0px; padding: 0 0 0 5px;">Documentation licensed under the <a href="http://reference.data.gov.uk/id/open-government-licence" rel="license">Open Government Licence</a></p>
        &copy; <a href="../copyright.html">British Crown Copyright</a> 2010 - 2018, Met Office
    </div>


  </body>
</html>