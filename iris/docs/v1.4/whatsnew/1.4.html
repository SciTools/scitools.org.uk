

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>What’s new in Iris 1.4 &mdash; Iris 1.4.1-dev documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.4.1-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Iris 1.4.1-dev documentation" href="../index.html" />
    <link rel="next" title="Iris examples" href="../examples/index.html" />
    <link rel="prev" title="iris.util" href="../iris/iris/util.html" />
 
    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
    <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE"> 

    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <script type="text/javascript" src="http://docs.python.org/2/_static/copybutton.js"></script>

  </head>
  <body>
<div style="background-color: white; text-align: left; padding: 1px 10px 1px 15px">
<p style="margin-left: 15px; font-weight:bolder; letter-spacing:0.1ex;">
<a href="../index.html"><img src="../_static/Iris7_1_trim_100.png" width=101 height=100 border="0" style="vertical-align:middle" alt="Logo"/></a>
<span style="font-size: 400%; vertical-align:middle"> Iris 1.4 </span>
</p>

</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../examples/index.html" title="Iris examples"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../iris/iris/util.html" title="iris.util"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../contents.html">contents</a>|&nbsp;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">What&#8217;s new in Iris 1.4</a><ul>
<li><a class="reference internal" href="#iris-1-4-features">Iris 1.4 features</a><ul>
<li><a class="reference internal" href="#incompatible-changes">Incompatible changes</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#experimental-regridding-enhancements">Experimental regridding enhancements</a><ul>
<li><a class="reference internal" href="#bilinear-rectilinear-regridding">Bilinear rectilinear regridding</a></li>
<li><a class="reference internal" href="#area-weighted-regridding">Area-weighted regridding</a></li>
<li><a class="reference internal" href="#area-conservative-regridding">Area-conservative regridding</a></li>
</ul>
</li>
<li><a class="reference internal" href="#iris-pandas-interoperablilty">Iris-Pandas interoperablilty</a></li>
<li><a class="reference internal" href="#load-cubes-from-the-internet-via-opendap">Load cubes from the internet via OPeNDAP</a></li>
<li><a class="reference internal" href="#geotiff-export">GeoTiff export</a></li>
<li><a class="reference internal" href="#cube-merge-update">Cube merge update</a></li>
<li><a class="reference internal" href="#unambiguous-season-year-naming">Unambiguous season year naming</a></li>
<li><a class="reference internal" href="#cubes-with-no-vertical-coord-can-now-be-exported-to-grib">Cubes with no vertical coord can now be exported to GRIB</a></li>
<li><a class="reference internal" href="#simplified-resource-configuration">Simplified resource configuration</a></li>
<li><a class="reference internal" href="#extended-grib-parameter-translation">Extended GRIB parameter translation</a></li>
<li><a class="reference internal" href="#one-dimensional-linear-interpolation-fix">One dimensional linear interpolation fix</a></li>
<li><a class="reference internal" href="#fix-for-iris-analysis-calculus-differentiate">Fix for iris.analysis.calculus.differentiate</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../iris/iris/util.html"
                        title="previous chapter">iris.util</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../examples/index.html"
                        title="next chapter">Iris examples</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/whatsnew/1.4.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="what-s-new-in-iris-1-4">
<h1>What&#8217;s new in Iris 1.4<a class="headerlink" href="#what-s-new-in-iris-1-4" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Release:</th><td class="field-body">1.4.0</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">14 June 2013</td>
</tr>
</tbody>
</table>
<p>This document explains the new/changed features of Iris in version 1.4.</p>
<div class="section" id="iris-1-4-features">
<h2>Iris 1.4 features<a class="headerlink" href="#iris-1-4-features" title="Permalink to this headline">¶</a></h2>
<p>A summary of the main features added with version 1.4:</p>
<ul class="simple">
<li>Multiple cubes can now be exported to a NetCDF file.</li>
<li>Correct nearest-neighbour calculation with circular coords.</li>
<li><a class="reference internal" href="#exp-regrid"><em>Experimental regridding enhancements</em></a>.</li>
<li><a class="reference internal" href="#iris-pandas"><em>Iris-Pandas interoperability</em></a>.</li>
<li>NIMROD level type 12 (levels below ground) can now be loaded.</li>
<li><a class="reference internal" href="#load-opendap"><em>Load cubes from the internet via OPeNDAP</em></a>.</li>
<li><a class="reference internal" href="#geotiff-export"><em>GeoTiff export (experimental)</em></a>.</li>
<li><a class="reference internal" href="#cube-merge-update"><em>Cube merge update</em></a>.</li>
<li><a class="reference internal" href="#season-year-name"><em>Unambiguous season year naming</em></a>.</li>
<li>NIMROD files with multiple fields and period of interest can now be loaded.</li>
<li>Missing values are now handled when loading GRIB messages.</li>
<li>PP export rule to calculate forecast period.</li>
<li><a class="reference internal" href="../iris/iris/cube.html#iris.cube.Cube.aggregated_by" title="iris.cube.Cube.aggregated_by"><tt class="xref py py-func docutils literal"><span class="pre">aggregated_by()</span></tt></a> now maintains array masking.</li>
<li>IEEE 32bit fieldsfiles can now be loaded.</li>
<li>NetCDF transverse mercator and climatology data can now be loaded.</li>
<li>Polar stereographic GRIB data can now be loaded.</li>
<li><a class="reference internal" href="#grib-novert"><em>Cubes with no vertical coord can now be exported to GRIB</em></a>.</li>
<li><a class="reference internal" href="#simple-cfg"><em>Simplified resource configuration</em></a>.</li>
<li><a class="reference internal" href="#grib-params"><em>Extended GRIB parameter translation</em></a>.</li>
<li>Added an optimisation for single-valued coordinate constraints.</li>
<li><a class="reference internal" href="#one-d-linear"><em>One dimensional linear interpolation fix</em></a>.</li>
<li><a class="reference internal" href="#calc-diff-fix"><em>Fix for iris.analysis.calculus.differentiate</em></a>.</li>
<li>Fixed pickling of cubes with 2D aux coords from NetCDF.</li>
<li>Fixed bug which ignored the &#8220;coords&#8221; keyword for certain plots.</li>
<li>Use the latest release of Cartopy, v0.8.0.</li>
</ul>
<div class="section" id="incompatible-changes">
<h3>Incompatible changes<a class="headerlink" href="#incompatible-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>As part of simplifying the mechanism for accessing test data,
<tt class="xref py py-func docutils literal"><span class="pre">iris.io.select_data_path()</span></tt>, <tt class="xref py py-data docutils literal"><span class="pre">iris.config.DATA_REPOSITORY</span></tt>,
<tt class="xref py py-data docutils literal"><span class="pre">iris.config.MASTER_DATA_REPOSITORY</span></tt> and
<tt class="xref py py-data docutils literal"><span class="pre">iris.config.RESOURCE_DIR</span></tt> have been removed.</li>
</ul>
</div>
<div class="section" id="deprecations">
<h3>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <em>add_custom_season_*</em> functions from <a class="reference internal" href="../iris/iris/coord_categorisation.html#module-iris.coord_categorisation" title="iris.coord_categorisation"><tt class="xref py py-mod docutils literal"><span class="pre">coord_categorisation</span></tt></a> have been deprecated in favour of adding their functionality to the <em>add_season_*</em> functions</li>
</ul>
</div>
</div>
<div class="section" id="experimental-regridding-enhancements">
<span id="exp-regrid"></span><h2>Experimental regridding enhancements<a class="headerlink" href="#experimental-regridding-enhancements" title="Permalink to this headline">¶</a></h2>
<p>Bilinear, area-weighted and area-conservative regridding functions are now available in
<a class="reference internal" href="../iris/iris/experimental.html#module-iris.experimental" title="iris.experimental"><tt class="xref py py-mod docutils literal"><span class="pre">iris.experimental</span></tt></a>. These functions support masked data and handle
derived coordinates such as hybrid height. The final API is still in development.
In the meantime:</p>
<div class="section" id="bilinear-rectilinear-regridding">
<h3>Bilinear rectilinear regridding<a class="headerlink" href="#bilinear-rectilinear-regridding" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../iris/iris/experimental/regrid.html#iris.experimental.regrid.regrid_bilinear_rectilinear_src_and_grid" title="iris.experimental.regrid.regrid_bilinear_rectilinear_src_and_grid"><tt class="xref py py-func docutils literal"><span class="pre">regrid_bilinear_rectilinear_src_and_grid()</span></tt></a>
can be used to regrid a cube onto a horizontal grid defined in a different coordinate system.
The data values are calculated using bilinear interpolation.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">iris.experimental.regrid</span> <span class="kn">import</span> <span class="n">regrid_bilinear_rectilinear_src_and_grid</span>
<span class="n">regridded_cube</span> <span class="o">=</span> <span class="n">regrid_bilinear_rectilinear_src_and_grid</span><span class="p">(</span><span class="n">source_cube</span><span class="p">,</span> <span class="n">target_grid_cube</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="area-weighted-regridding">
<h3>Area-weighted regridding<a class="headerlink" href="#area-weighted-regridding" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../iris/iris/experimental/regrid.html#iris.experimental.regrid.regrid_area_weighted_rectilinear_src_and_grid" title="iris.experimental.regrid.regrid_area_weighted_rectilinear_src_and_grid"><tt class="xref py py-func docutils literal"><span class="pre">regrid_area_weighted_rectilinear_src_and_grid()</span></tt></a> can be used to regrid a cube
such that the data values of the resulting cube are calculated using the
area-weighted mean.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">iris.experimental.regrid</span> <span class="kn">import</span> <span class="n">regrid_area_weighted_rectilinear_src_and_grid</span> <span class="k">as</span> <span class="n">regrid_area_weighted</span>
<span class="n">regridded_cube</span> <span class="o">=</span> <span class="n">regrid_area_weighted</span><span class="p">(</span><span class="n">source_cube</span><span class="p">,</span> <span class="n">target_grid_cube</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="area-conservative-regridding">
<h3>Area-conservative regridding<a class="headerlink" href="#area-conservative-regridding" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../iris/iris/experimental/regrid_conservative.html#iris.experimental.regrid_conservative.regrid_conservative_via_esmpy" title="iris.experimental.regrid_conservative.regrid_conservative_via_esmpy"><tt class="xref py py-func docutils literal"><span class="pre">regrid_conservative_via_esmpy()</span></tt></a>
can be used for area-conservative regridding between geographical coordinate systems.
This uses the ESMF library functions, via the ESMPy interface.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">iris.experimental.regrid_conservative</span> <span class="kn">import</span> <span class="n">regrid_conservative_via_esmpy</span> 
<span class="n">regridded_cube</span> <span class="o">=</span> <span class="n">regrid_conservative_via_esmpy</span><span class="p">(</span><span class="n">source_cube</span><span class="p">,</span> <span class="n">target_grid_cube</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="iris-pandas-interoperablilty">
<span id="iris-pandas"></span><h2>Iris-Pandas interoperablilty<a class="headerlink" href="#iris-pandas-interoperablilty" title="Permalink to this headline">¶</a></h2>
<p>Conversion to and from Pandas <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/api.html#series">Series</a> and <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/api.html#dataframe">DataFrames</a> is now available.
See <a class="reference internal" href="../iris/iris/pandas.html#module-iris.pandas" title="iris.pandas"><tt class="xref py py-mod docutils literal"><span class="pre">iris.pandas</span></tt></a> for more details.</p>
</div>
<div class="section" id="load-cubes-from-the-internet-via-opendap">
<span id="load-opendap"></span><h2>Load cubes from the internet via OPeNDAP<a class="headerlink" href="#load-cubes-from-the-internet-via-opendap" title="Permalink to this headline">¶</a></h2>
<p>Cubes can now be loaded directly from the internet, via <a class="reference external" href="http://www.opendap.org/about">OPeNDAP</a>.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;http://geoport.whoi.edu/thredds/dodsC/bathy/gom15&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="geotiff-export">
<span id="id1"></span><h2>GeoTiff export<a class="headerlink" href="#geotiff-export" title="Permalink to this headline">¶</a></h2>
<p>With this experimental feature, two dimensional cubes can now be exported to GeoTiff files.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">iris.experimental.raster</span> <span class="kn">import</span> <span class="n">export_geotiff</span>
<span class="n">export_geotiff</span><span class="p">(</span><span class="n">cube</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is a raw data export only and does not save Iris plots.</p>
</div>
</div>
<div class="section" id="cube-merge-update">
<span id="id2"></span><h2>Cube merge update<a class="headerlink" href="#cube-merge-update" title="Permalink to this headline">¶</a></h2>
<p>Cube merging now favours numerical coordinates over string coordinates
to describe a dimension, and <a class="reference internal" href="../iris/iris/coords.html#iris.coords.DimCoord" title="iris.coords.DimCoord"><tt class="xref py py-class docutils literal"><span class="pre">DimCoord</span></tt></a> over
<a class="reference internal" href="../iris/iris/coords.html#iris.coords.AuxCoord" title="iris.coords.AuxCoord"><tt class="xref py py-class docutils literal"><span class="pre">AuxCoord</span></tt></a>. These modifications prevent the error:
<em>&#8220;No functional relationship between separable and inseparable candidate dimensions&#8221;</em>.</p>
</div>
<div class="section" id="unambiguous-season-year-naming">
<span id="season-year-name"></span><h2>Unambiguous season year naming<a class="headerlink" href="#unambiguous-season-year-naming" title="Permalink to this headline">¶</a></h2>
<p>The default names of categorisation coordinates are now less ambiguous.
For example, <a class="reference internal" href="../iris/iris/coord_categorisation.html#iris.coord_categorisation.add_month_number" title="iris.coord_categorisation.add_month_number"><tt class="xref py py-func docutils literal"><span class="pre">add_month_number()</span></tt></a> and
<a class="reference internal" href="../iris/iris/coord_categorisation.html#iris.coord_categorisation.add_month_fullname" title="iris.coord_categorisation.add_month_fullname"><tt class="xref py py-func docutils literal"><span class="pre">add_month_fullname()</span></tt></a> now create
&#8220;month_number&#8221; and &#8220;month_fullname&#8221; coordinates.</p>
</div>
<div class="section" id="cubes-with-no-vertical-coord-can-now-be-exported-to-grib">
<span id="grib-novert"></span><h2>Cubes with no vertical coord can now be exported to GRIB<a class="headerlink" href="#cubes-with-no-vertical-coord-can-now-be-exported-to-grib" title="Permalink to this headline">¶</a></h2>
<p>Iris can now export cubes with no vertical coord to GRIB.
The solution is still under discussion: See <a class="reference external" href="https://github.com/SciTools/iris/issues/519">https://github.com/SciTools/iris/issues/519</a>.</p>
</div>
<div class="section" id="simplified-resource-configuration">
<span id="simple-cfg"></span><h2>Simplified resource configuration<a class="headerlink" href="#simplified-resource-configuration" title="Permalink to this headline">¶</a></h2>
<p>A new configuration variable called <tt class="xref py py-data docutils literal"><span class="pre">iris.config.TEST_DATA_DIR</span></tt> 
has been added, replacing the previous combination of
<tt class="xref py py-data docutils literal"><span class="pre">iris.config.MASTER_DATA_REPOSITORY</span></tt> and
<tt class="xref py py-data docutils literal"><span class="pre">iris.config.DATA_REPOSITORY</span></tt>. This constant should be the path
to a directory containing the test data required by the unit tests. It can
be set by adding a <tt class="docutils literal"><span class="pre">test_data_dir</span></tt> entry to the <tt class="docutils literal"><span class="pre">Resources</span></tt> section of
<tt class="docutils literal"><span class="pre">site.cfg</span></tt>. See <a class="reference internal" href="../iris/iris/config.html#module-iris.config" title="iris.config"><tt class="xref py py-mod docutils literal"><span class="pre">iris.config</span></tt></a> for more details.</p>
</div>
<div class="section" id="extended-grib-parameter-translation">
<span id="grib-params"></span><h2>Extended GRIB parameter translation<a class="headerlink" href="#extended-grib-parameter-translation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>More GRIB2 params are recognised on input.</li>
<li>Now translates some codes on GRIB2 output.</li>
<li>Some GRIB2 params may load with a different standard_name.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="one-dimensional-linear-interpolation-fix">
<span id="one-d-linear"></span><h2>One dimensional linear interpolation fix<a class="headerlink" href="#one-dimensional-linear-interpolation-fix" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../iris/iris/analysis/interpolate.html#iris.analysis.interpolate.linear" title="iris.analysis.interpolate.linear"><tt class="xref py py-func docutils literal"><span class="pre">linear()</span></tt></a> can now extrapolate from a single point
assuming a gradient of zero. This prevents an issue when loading cross sections
with a hybrid height coordinate, on a staggered grid and only a single orography field.</p>
</div>
<div class="section" id="fix-for-iris-analysis-calculus-differentiate">
<span id="calc-diff-fix"></span><h2>Fix for iris.analysis.calculus.differentiate<a class="headerlink" href="#fix-for-iris-analysis-calculus-differentiate" title="Permalink to this headline">¶</a></h2>
<p>A bug in <a class="reference internal" href="../iris/iris/analysis/calculus.html#iris.analysis.calculus.differentiate" title="iris.analysis.calculus.differentiate"><tt class="xref py py-func docutils literal"><span class="pre">differentiate()</span></tt></a> that had the potential to cause
the loss of coordinate metadata when calculating the curl or the derivative of a cube has been fixed.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../examples/index.html" title="Iris examples"
             >next</a> |</li>
        <li class="right" >
          <a href="../iris/iris/util.html" title="iris.util"
             >previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../contents.html">contents</a>|&nbsp;</li>
 
      </ul>
    </div>

    <div class="footer">
    <p style="text-align: left; float: left; margin: 0px; padding: 0 0 0 5px;">Documentation licensed under the <a href="http://reference.data.gov.uk/id/open-government-licence" rel="license">Open Government Licence</a></p>
        &copy; <a href="../copyright.html">British Crown Copyright</a> 2010 - 2013, Met Office
    </div>


  </body>
</html>