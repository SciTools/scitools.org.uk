
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>What’s new in Iris 1.6 &#8212; Iris 2.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="What’s new in Iris 1.5" href="1.5.html" />
    <link rel="prev" title="What’s new in Iris 1.7" href="1.7.html" />
 
    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
    <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE"> 

    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <script type="text/javascript" src="http://docs.python.org/2/_static/copybutton.js"></script>

    <link rel="icon" type="image/png" sizes="32x32" href="../_static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../_static/favicon-16x16.png">

    <link href="https://fonts.googleapis.com/css?family=Alike|Noto+Sans" rel="stylesheet">

  </head><body>

<a href="https://github.com/SciTools/iris">
    <img class="github-forkme" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
         alt="Fork Iris on GitHub" />
</a>


<div class="header-content">
    <a href="../index.html">
        <img src="../_static/Iris7_1_trim_100.png" alt="Iris logo" />
    </a>
    <div class="strapline">
      <h1>
          Iris <span class="version">v2.1</span>
      </h1>
      <p>
         A powerful, format-agnostic, and community-driven Python library for analysing and
         visualising Earth science data.
      </p>
    </div>
</div>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="1.5.html" title="What’s new in Iris 1.5"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="1.7.html" title="What’s new in Iris 1.7"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../contents.html">contents</a>|&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">What’s new in Iris</a> &#187;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">What’s new in Iris 1.6</a><ul>
<li><a class="reference internal" href="#iris-1-6-features">Iris 1.6 features</a></li>
<li><a class="reference internal" href="#bugs-fixed">Bugs fixed</a></li>
<li><a class="reference internal" href="#incompatible-changes">Incompatible changes</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#new-contributors">New Contributors</a><ul>
<li><a class="reference internal" href="#a-new-utility-function-to-assist-with-caching">A new utility function to assist with caching</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-rms-aggregator-supports-weights">The RMS aggregator supports weights</a></li>
<li><a class="reference internal" href="#equalise-cube-attributes">Equalise cube attributes</a></li>
<li><a class="reference internal" href="#masking-a-collapsed-result-by-missing-data-tolerance">Masking a collapsed result by missing-data tolerance</a></li>
<li><a class="reference internal" href="#promote-a-scalar-coordinate">Promote a scalar coordinate</a></li>
<li><a class="reference internal" href="#a-new-peak-aggregator-providing-spline-interpolation">A new PEAK aggregator providing spline interpolation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="1.7.html"
                        title="previous chapter">What’s new in Iris 1.7</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="1.5.html"
                        title="next chapter">What’s new in Iris 1.5</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/whatsnew/1.6.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="what-s-new-in-iris-1-6">
<h1>What’s new in Iris 1.6<a class="headerlink" href="#what-s-new-in-iris-1-6" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Release:</th><td class="field-body">1.6.1</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">18th February 2014</td>
</tr>
</tbody>
</table>
<p>This document explains the new/changed features of Iris in version 1.6.
(<a class="reference internal" href="index.html"><span class="doc">View all changes</span></a>.)</p>
<div class="section" id="iris-1-6-features">
<h2>Iris 1.6 features<a class="headerlink" href="#iris-1-6-features" title="Permalink to this headline">¶</a></h2>
<div class="admonition-showcase-feature-back-to-the-future admonition" id="showcase">
<p class="first admonition-title">Showcase Feature - Back to the future …</p>
<p>The new <a class="reference internal" href="../iris/iris.html#iris.FUTURE" title="iris.FUTURE"><code class="xref py py-data docutils literal notranslate"><span class="pre">iris.FUTURE</span></code></a> global variable is a <a class="reference internal" href="../iris/iris.html#iris.Future" title="iris.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.Future</span></code></a>
instance that controls the run-time behaviour of Iris.</p>
<p>By setting <code class="xref py py-data docutils literal notranslate"><span class="pre">iris.FUTURE.cell_datetime_objects</span></code> to <em>True</em>, a <em>time</em>
reference coordinate will return <em>datetime-like</em> objects when invoked
with <a class="reference internal" href="../iris/iris/coords.html#iris.coords.Coord.cell" title="iris.coords.Coord.cell"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.coords.Coord.cell()</span></code></a> or <a class="reference internal" href="../iris/iris/coords.html#iris.coords.Coord.cells" title="iris.coords.Coord.cells"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.coords.Coord.cells()</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">iris.coords</span> <span class="kn">import</span> <span class="n">DimCoord</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iris</span><span class="o">.</span><span class="n">FUTURE</span><span class="o">.</span><span class="n">cell_datetime_objects</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coord</span> <span class="o">=</span> <span class="n">DimCoord</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;hours since epoch&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">cell</span><span class="p">)</span> <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">coord</span><span class="o">.</span><span class="n">cells</span><span class="p">()])</span>
<span class="go">[&#39;1970-01-01 01:00:00&#39;, &#39;1970-01-01 02:00:00&#39;, &#39;1970-01-01 03:00:00&#39;]</span>
</pre></div>
</div>
<p>Note that, either a <a class="reference external" href="https://docs.python.org/2.7/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">netcdftime.datetime</span></code>
object instance will be returned, depending on the calendar of the time
reference coordinate.</p>
<p>This capability permits the ability to express time constraints more
naturally when the cell represents a <em>datetime-like</em> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ignore the 1st of January.</span>
<span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="k">lambda</span> <span class="n">cell</span><span class="p">:</span> <span class="n">cell</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">month</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">cell</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">day</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that, <a class="reference internal" href="../iris/iris.html#iris.Future" title="iris.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.Future</span></code></a> also supports a <a class="reference external" href="http://docs.python.org/2/reference/datamodel.html#context-managers">context manager</a>
which allows multiple sections of code to execute with different run-time behaviour.</p>
<div class="last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">FUTURE</span><span class="p">)</span>
<span class="go">Future(cell_datetime_objects=False)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">iris</span><span class="o">.</span><span class="n">FUTURE</span><span class="o">.</span><span class="n">context</span><span class="p">(</span><span class="n">cell_datetime_objects</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
<span class="gp">... </span>    <span class="c1"># Code that expects to deal with datetime-like objects.</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">FUTURE</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">Future(cell_datetime_objects=True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">FUTURE</span><span class="p">)</span>
<span class="go">Future(cell_datetime_objects=False)</span>
</pre></div>
</div>
</div>
<div class="admonition-showcase-feature-partial-date-time admonition">
<p class="first admonition-title">Showcase Feature - Partial date/time …</p>
<p>The <a class="reference internal" href="../iris/iris/time.html#iris.time.PartialDateTime" title="iris.time.PartialDateTime"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.time.PartialDateTime</span></code></a> class provides the ability to perform
comparisons with other <em>datetime-like</em> objects such as
<a class="reference external" href="https://docs.python.org/2.7/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">netcdftime.datetime</span></code>.</p>
<p>The <em>year, month, day, hour, minute, second</em> and <em>microsecond</em> attributes of
a <a class="reference internal" href="../iris/iris/time.html#iris.time.PartialDateTime" title="iris.time.PartialDateTime"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.time.PartialDateTime</span></code></a> object may be fully or partially specified
for any given comparison.</p>
<p>This is particularly useful for time based constraints, whilst enabling the
<code class="xref py py-data docutils literal notranslate"><span class="pre">iris.FUTURE.cell_datetime_objects</span></code>, see <a class="reference internal" href="2.0.html#showcase"><span class="std std-ref">here</span></a> for further
details on this new release feature.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">iris.time</span> <span class="kn">import</span> <span class="n">PartialDateTime</span>

<span class="c1"># Ignore the 1st of January.</span>
<span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="k">lambda</span> <span class="n">cell</span><span class="p">:</span> <span class="n">cell</span> <span class="o">!=</span> <span class="n">PartialDateTime</span><span class="p">(</span><span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>

<span class="c1"># Constrain by a specific year.</span>
<span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">PartialDateTime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2013</span><span class="p">))</span>
</pre></div>
</div>
<p class="last">Also see the User Guide <a class="reference internal" href="../userguide/loading_iris_cubes.html#using-time-constraints"><span class="std std-ref">Constraining on Time</span></a>
section for further commentary.</p>
</div>
<ul class="simple">
<li>GRIB loading supports latitude/longitude or Gaussian reduced grids for
version 1 and version 2.</li>
<li><a class="reference internal" href="#caching"><span class="std std-ref">A new utility function to assist with caching</span></a>.</li>
<li><a class="reference internal" href="#rms"><span class="std std-ref">The RMS aggregator supports weights</span></a>.</li>
<li><a class="reference internal" href="#equalise"><span class="std std-ref">A new experimental function to equalise cube attributes</span></a>.</li>
<li><a class="reference internal" href="#tolerance"><span class="std std-ref">Collapsing a cube provides a tolerance level for missing-data</span></a>.</li>
<li>NAME loading supports vertical coordinates.</li>
<li>UM land/sea mask de-compression for Fieldsfiles and PP files.</li>
<li>Lateral boundary condition Fieldsfile support.</li>
<li>Staggered grid support for Fieldsfiles extended to type 6 (Arakawa C grid
with v at poles).</li>
<li>Extend support for Fieldsfiles with grid codes 11, 26, 27, 28 and 29.</li>
<li><a class="reference internal" href="#promote"><span class="std std-ref">Promoting a scalar coordinate to new leading cube dimension</span></a>.</li>
<li>Interpreting cell methods from NAME.</li>
<li>GRIB2 export without forecast_period, enabling NAME to GRIB2.</li>
<li>Loading height levels from GRIB2.</li>
<li><a class="reference internal" href="../iris/iris/coord_categorisation.html#iris.coord_categorisation.add_categorised_coord" title="iris.coord_categorisation.add_categorised_coord"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.coord_categorisation.add_categorised_coord()</span></code></a> now supports
multi-dimensional coordinate categorisation.</li>
<li>Fieldsfiles and PP support for loading and saving of air potential temperature.</li>
<li><a class="reference internal" href="../iris/iris/experimental/regrid.html#iris.experimental.regrid.regrid_weighted_curvilinear_to_rectilinear" title="iris.experimental.regrid.regrid_weighted_curvilinear_to_rectilinear"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.experimental.regrid.regrid_weighted_curvilinear_to_rectilinear()</span></code></a>
regrids curvilinear point data to a target rectilinear grid using associated
area weights.</li>
<li>Extended capability of the NetCDF saver <a class="reference internal" href="../iris/iris/fileformats/netcdf.html#iris.fileformats.netcdf.Saver.write" title="iris.fileformats.netcdf.Saver.write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.fileformats.netcdf.Saver.write()</span></code></a>
for fine-tune control of a <code class="xref py py-mod docutils literal notranslate"><span class="pre">netCDF4.Variable</span></code>. Also allows multiple dimensions
to be nominated as <em>unlimited</em>.</li>
<li><a class="reference internal" href="#peak"><span class="std std-ref">A new PEAK aggregator providing spline interpolation</span></a>.</li>
<li>A new utility function <a class="reference internal" href="../iris/iris/util.html#iris.util.broadcast_to_shape" title="iris.util.broadcast_to_shape"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.util.broadcast_to_shape()</span></code></a>.</li>
<li>A new utility function <a class="reference internal" href="../iris/iris/util.html#iris.util.as_compatible_shape" title="iris.util.as_compatible_shape"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.util.as_compatible_shape()</span></code></a>.</li>
<li>Iris tests can now be run on systems where directory write permissions
previously did not allow it.  This is achieved by writing to the current working
directory in such cases.</li>
<li>Support for 365 day calendar PP fields.</li>
<li>Added phenomenon translation between cf and grib2 for wind (from) direction.</li>
<li>PP files now retain lbfc value on save, derived from the stash attribute.</li>
</ul>
</div>
<div class="section" id="bugs-fixed">
<h2>Bugs fixed<a class="headerlink" href="#bugs-fixed" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../iris/iris/cube.html#iris.cube.Cube.rolling_window" title="iris.cube.Cube.rolling_window"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.cube.Cube.rolling_window()</span></code></a> has been extended to support masked arrays.</li>
<li><a class="reference internal" href="../iris/iris/cube.html#iris.cube.Cube.collapsed" title="iris.cube.Cube.collapsed"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.cube.Cube.collapsed()</span></code></a> now handles string coordinates.</li>
<li>Default LBUSER(2) to -99 for Fieldsfile and PP saving.</li>
<li><a class="reference internal" href="../iris/iris/util.html#iris.util.monotonic" title="iris.util.monotonic"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.util.monotonic()</span></code></a> returns the correct direction.</li>
<li>File loaders correctly parse filenames containing colons.</li>
<li>ABF loader now correctly loads the ABF data payload once.</li>
<li>Support for 1D array <code class="xref py py-data docutils literal notranslate"><span class="pre">iris.cube.cube.attributes</span></code>.</li>
<li>GRIB bounded level saving fix.</li>
<li><a class="reference internal" href="../iris/iris/analysis/cartography.html#iris.analysis.cartography.project" title="iris.analysis.cartography.project"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.analysis.cartography.project()</span></code></a> now associates a coordinate system
with the resulting target cube, where applicable.</li>
<li><a class="reference internal" href="../iris/iris/util.html#iris.util.array_equal" title="iris.util.array_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.util.array_equal()</span></code></a> now correctly ignores any mask if present,
matching the behaviour of <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.array_equal.html#numpy.array_equal" title="(in NumPy v1.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array_equal()</span></code></a> except with string array
support.</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.analysis.interpolate.linear()</span></code> now retains a mask in the resulting
cube.</li>
<li><a class="reference internal" href="../iris/iris/coords.html#iris.coords.DimCoord.from_regular" title="iris.coords.DimCoord.from_regular"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.coords.DimCoord.from_regular()</span></code></a> now correctly returns a coordinate
which will always be regular as indicated by <a class="reference internal" href="../iris/iris/util.html#iris.util.is_regular" title="iris.util.is_regular"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_regular()</span></code></a>.</li>
<li><a class="reference internal" href="../iris/iris/util.html#iris.util.rolling_window" title="iris.util.rolling_window"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.util.rolling_window()</span></code></a> handling of masked arrays (degenerate
masks) fixed.</li>
<li>Exception no longer raised for any ellipsoid definition in nimrod loading.</li>
</ul>
</div>
<div class="section" id="incompatible-changes">
<h2>Incompatible changes<a class="headerlink" href="#incompatible-changes" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">The experimental ‘concatenate’ function is now a method of a
<a class="reference internal" href="../iris/iris/cube.html#iris.cube.CubeList" title="iris.cube.CubeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.cube.CubeList</span></code></a>, see <a class="reference internal" href="../iris/iris/cube.html#iris.cube.CubeList.concatenate" title="iris.cube.CubeList.concatenate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.cube.CubeList.concatenate()</span></code></a>. The
functionality is unchanged.</p>
</li>
<li><p class="first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.cube.Cube.extract_by_trajectory()</span></code> has been removed.
Instead, use <a class="reference internal" href="../iris/iris/analysis/trajectory.html#iris.analysis.trajectory.interpolate" title="iris.analysis.trajectory.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.analysis.trajectory.interpolate()</span></code></a>.</p>
</li>
<li><p class="first"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load_strict()</span></code> has been removed.
Instead, use <a class="reference internal" href="../iris/iris.html#iris.load_cube" title="iris.load_cube"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load_cube()</span></code></a> and <a class="reference internal" href="../iris/iris.html#iris.load_cubes" title="iris.load_cubes"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load_cubes()</span></code></a>.</p>
</li>
<li><p class="first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.coords.Coord.cos()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.coords.Coord.sin()</span></code>
have been removed.</p>
</li>
<li><p class="first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.coords.Coord.unit_converted()</span></code> has been removed.
Instead, make a copy of the coordinate using
<a class="reference internal" href="../iris/iris/coords.html#iris.coords.Coord.copy" title="iris.coords.Coord.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.coords.Coord.copy()</span></code></a> and then call the
<a class="reference internal" href="../iris/iris/coords.html#iris.coords.Coord.convert_units" title="iris.coords.Coord.convert_units"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.coords.Coord.convert_units()</span></code></a> method of the new
coordinate.</p>
</li>
<li><p class="first">Iteration over a <a class="reference internal" href="../iris/iris/cube.html#iris.cube.Cube" title="iris.cube.Cube"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cube</span></code></a> has been removed. Instead,
use <a class="reference internal" href="../iris/iris/cube.html#iris.cube.Cube.slices" title="iris.cube.Cube.slices"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.cube.Cube.slices()</span></code></a>.</p>
</li>
<li><p class="first">The following <code class="xref py py-class docutils literal notranslate"><span class="pre">Unit</span></code> deprecated methods/properties have been removed.</p>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Removed property/method</th>
<th class="head">New method</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="xref py py-meth docutils literal notranslate"><span class="pre">convertible()</span></code></td>
<td><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_convertible()</span></code></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-attr docutils literal notranslate"><span class="pre">dimensionless</span></code></td>
<td><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_dimensionless()</span></code></td>
</tr>
<tr class="row-even"><td><code class="xref py py-attr docutils literal notranslate"><span class="pre">no_unit</span></code></td>
<td><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_no_unit()</span></code></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-attr docutils literal notranslate"><span class="pre">time_reference</span></code></td>
<td><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_time_reference()</span></code></td>
</tr>
<tr class="row-even"><td><code class="xref py py-attr docutils literal notranslate"><span class="pre">unknown</span></code></td>
<td><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_unknown()</span></code></td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">As a result of deprecating <code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.cube.Cube.add_history()</span></code> and removing the
automatic appending of history by operations such as cube arithmetic,
collapsing, and aggregating, the signatures of a number of functions within
<a class="reference internal" href="../iris/iris/analysis/maths.html#module-iris.analysis.maths" title="iris.analysis.maths"><code class="xref py py-mod docutils literal notranslate"><span class="pre">iris.analysis.maths</span></code></a> have been modified along with that of
<a class="reference internal" href="../iris/iris/analysis.html#iris.analysis.Aggregator" title="iris.analysis.Aggregator"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.analysis.Aggregator</span></code></a> and <a class="reference internal" href="../iris/iris/analysis.html#iris.analysis.WeightedAggregator" title="iris.analysis.WeightedAggregator"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.analysis.WeightedAggregator</span></code></a>.</p>
</li>
<li><p class="first">The experimental ABF and ABL functionality has now been promoted to
core functionality in <a class="reference internal" href="../iris/iris/fileformats/abf.html#module-iris.fileformats.abf" title="iris.fileformats.abf"><code class="xref py py-mod docutils literal notranslate"><span class="pre">iris.fileformats.abf</span></code></a>.</p>
</li>
<li><p class="first">The following <a class="reference internal" href="../iris/iris/coord_categorisation.html#module-iris.coord_categorisation" title="iris.coord_categorisation"><code class="xref py py-mod docutils literal notranslate"><span class="pre">iris.coord_categorisation</span></code></a> deprecated functions have been
removed.</p>
<table border="1" class="docutils">
<colgroup>
<col width="53%" />
<col width="47%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Removed function</th>
<th class="head">New function</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="xref py py-func docutils literal notranslate"><span class="pre">add_custom_season()</span></code></td>
<td><a class="reference internal" href="../iris/iris/coord_categorisation.html#iris.coord_categorisation.add_season" title="iris.coord_categorisation.add_season"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_season()</span></code></a></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-func docutils literal notranslate"><span class="pre">add_custom_season_number()</span></code></td>
<td><a class="reference internal" href="../iris/iris/coord_categorisation.html#iris.coord_categorisation.add_season_number" title="iris.coord_categorisation.add_season_number"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_season_number()</span></code></a></td>
</tr>
<tr class="row-even"><td><code class="xref py py-func docutils literal notranslate"><span class="pre">add_custom_season_year()</span></code></td>
<td><a class="reference internal" href="../iris/iris/coord_categorisation.html#iris.coord_categorisation.add_season_year" title="iris.coord_categorisation.add_season_year"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_season_year()</span></code></a></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-func docutils literal notranslate"><span class="pre">add_custom_season_membership()</span></code></td>
<td><a class="reference internal" href="../iris/iris/coord_categorisation.html#iris.coord_categorisation.add_season_membership" title="iris.coord_categorisation.add_season_membership"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_season_membership()</span></code></a></td>
</tr>
<tr class="row-even"><td><code class="xref py py-func docutils literal notranslate"><span class="pre">add_month_shortname()</span></code></td>
<td><a class="reference internal" href="../iris/iris/coord_categorisation.html#iris.coord_categorisation.add_month" title="iris.coord_categorisation.add_month"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_month()</span></code></a></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-func docutils literal notranslate"><span class="pre">add_weekday_shortname()</span></code></td>
<td><a class="reference internal" href="../iris/iris/coord_categorisation.html#iris.coord_categorisation.add_weekday" title="iris.coord_categorisation.add_weekday"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_weekday()</span></code></a></td>
</tr>
<tr class="row-even"><td><code class="xref py py-func docutils literal notranslate"><span class="pre">add_season_month_initials()</span></code></td>
<td><a class="reference internal" href="../iris/iris/coord_categorisation.html#iris.coord_categorisation.add_season" title="iris.coord_categorisation.add_season"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_season()</span></code></a></td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">When a cube is loaded from PP or GRIB and it has both time and forecast period
coordinates, and the time coordinate has bounds, the forecast period coordinate
will now also have bounds. These bounds will be aligned with the bounds of the
time coordinate taking into account the forecast reference time. Also,
the forecast period point will now be aligned with the time point.</p>
</li>
</ul>
</div>
<div class="section" id="deprecations">
<h2>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.cube.Cube.add_history()</span></code> has been deprecated in favour
of users modifying/creating the history metadata directly. This is
because the automatic behaviour did not deliver a sufficiently complete,
auditable history and often prevented the merging of cubes.</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.util.broadcast_weights()</span></code> has been deprecated and replaced
by the new utility function <a class="reference internal" href="../iris/iris/util.html#iris.util.broadcast_to_shape" title="iris.util.broadcast_to_shape"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.util.broadcast_to_shape()</span></code></a>.</li>
<li>Callback mechanism <cite>iris.run_callback</cite> has had its deprecation of return
values revoked.  The callback can now return cube instances as well as
inplace changes to the cube.</li>
</ul>
</div>
<div class="section" id="new-contributors">
<h2>New Contributors<a class="headerlink" href="#new-contributors" title="Permalink to this headline">¶</a></h2>
<p>Congratulations and thank you to <a class="reference external" href="https://github.com/felicityguest">felicityguest</a>, <a class="reference external" href="https://github.com/jkettleb">jkettleb</a>,
<a class="reference external" href="https://github.com/kwilliams-mo">kwilliams-mo</a> and <a class="reference external" href="https://github.com/shoyer">shoyer</a> who all made their first contribution
to Iris!</p>
<hr class="docutils" />
<div class="section" id="a-new-utility-function-to-assist-with-caching">
<span id="caching"></span><h3>A new utility function to assist with caching<a class="headerlink" href="#a-new-utility-function-to-assist-with-caching" title="Permalink to this headline">¶</a></h3>
<p>To assist with management of caching results to file, the new utility
function <a class="reference internal" href="../iris/iris/util.html#iris.util.file_is_newer_than" title="iris.util.file_is_newer_than"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.util.file_is_newer_than()</span></code></a> may be used to easily determine whether
the modification time of a specified cache file is newer than one or more other files.</p>
<p>Typically, the use of caching is a means to circumvent the cost of repeating time
consuming processing, or to reap the benefit of fast-loading a pickled cube.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Determine whether to load from the cache or source.</span>
<span class="k">if</span> <span class="n">iris</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">file_is_newer</span><span class="p">(</span><span class="n">cache_file</span><span class="p">,</span> <span class="n">source_file</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cache_file</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
        <span class="n">cube</span> <span class="o">=</span> <span class="n">cPickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fh</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">cube</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load_cube</span><span class="p">(</span><span class="n">source_file</span><span class="p">)</span>

    <span class="c1"># Perhaps perform some intensive processing ...</span>

    <span class="c1"># Create the cube cache.</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cache_file</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
        <span class="n">cPickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">cube</span><span class="p">,</span> <span class="n">fh</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-rms-aggregator-supports-weights">
<span id="rms"></span><h2>The RMS aggregator supports weights<a class="headerlink" href="#the-rms-aggregator-supports-weights" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../iris/iris/analysis.html#iris.analysis.RMS" title="iris.analysis.RMS"><code class="xref py py-data docutils literal notranslate"><span class="pre">iris.analysis.RMS</span></code></a> aggregator has been extended to allow the use of
weights using the new keyword argument <code class="xref py py-data docutils literal notranslate"><span class="pre">weights</span></code>.</p>
<p>For example, an RMS weighted cube collapse is performed as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">iris.analysis</span> <span class="kn">import</span> <span class="n">RMS</span>
<span class="n">collapsed_cube</span> <span class="o">=</span> <span class="n">cube</span><span class="o">.</span><span class="n">collapsed</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="n">RMS</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="equalise-cube-attributes">
<span id="equalise"></span><h2>Equalise cube attributes<a class="headerlink" href="#equalise-cube-attributes" title="Permalink to this headline">¶</a></h2>
<p>To assist with <a class="reference internal" href="../iris/iris/cube.html#iris.cube.Cube" title="iris.cube.Cube"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.cube.Cube</span></code></a> merging, the new experimental in-place
function <a class="reference internal" href="../iris/iris/experimental/equalise_cubes.html#iris.experimental.equalise_cubes.equalise_attributes" title="iris.experimental.equalise_cubes.equalise_attributes"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.experimental.equalise_cubes.equalise_attributes()</span></code></a> ensures
that a sequence of cubes contains a common set of <a class="reference internal" href="../iris/iris/cube.html#iris.cube.Cube.attributes" title="iris.cube.Cube.attributes"><code class="xref py py-data docutils literal notranslate"><span class="pre">iris.cube.Cube.attributes</span></code></a>.</p>
<p>This attempts to smooth the merging process by ensuring that all candidate cubes
have the same attributes.</p>
</div>
<div class="section" id="masking-a-collapsed-result-by-missing-data-tolerance">
<span id="tolerance"></span><h2>Masking a collapsed result by missing-data tolerance<a class="headerlink" href="#masking-a-collapsed-result-by-missing-data-tolerance" title="Permalink to this headline">¶</a></h2>
<p>The result from collapsing masked cube data may now be completely
masked by providing a <code class="xref py py-data docutils literal notranslate"><span class="pre">mdtol</span></code> missing-data tolerance keyword
to <a class="reference internal" href="../iris/iris/cube.html#iris.cube.Cube.collapsed" title="iris.cube.Cube.collapsed"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iris.cube.Cube.collapsed()</span></code></a>.</p>
<p>This tolerance provides a threshold that will <strong>completely</strong> mask the
collapsed result whenever the fraction of data to missing-data is
less than or equal to the provided tolerance.</p>
</div>
<div class="section" id="promote-a-scalar-coordinate">
<span id="promote"></span><h2>Promote a scalar coordinate<a class="headerlink" href="#promote-a-scalar-coordinate" title="Permalink to this headline">¶</a></h2>
<p>The new utility function <a class="reference internal" href="../iris/iris/util.html#iris.util.new_axis" title="iris.util.new_axis"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.util.new_axis()</span></code></a> creates a new cube with
a new leading dimension of size unity. If a scalar coordinate is provided, then
the scalar coordinate is promoted to be the dimension coordinate for the new
leading dimension.</p>
<p>Note that, this function will load the data payload of the cube.</p>
</div>
<div class="section" id="a-new-peak-aggregator-providing-spline-interpolation">
<span id="peak"></span><h2>A new PEAK aggregator providing spline interpolation<a class="headerlink" href="#a-new-peak-aggregator-providing-spline-interpolation" title="Permalink to this headline">¶</a></h2>
<p>The new <a class="reference internal" href="../iris/iris/analysis.html#iris.analysis.PEAK" title="iris.analysis.PEAK"><code class="xref py py-data docutils literal notranslate"><span class="pre">iris.analysis.PEAK</span></code></a> aggregator calculates the global peak
value from a spline interpolation of the <a class="reference internal" href="../iris/iris/cube.html#iris.cube.Cube" title="iris.cube.Cube"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.cube.Cube</span></code></a> data payload
along a nominated coordinate axis.</p>
<p>For example, to calculate the peak time:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">iris.analysis</span> <span class="kn">import</span> <span class="n">PEAK</span>
<span class="n">collapsed_cube</span> <span class="o">=</span> <span class="n">cube</span><span class="o">.</span><span class="n">collapsed</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">PEAK</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="1.5.html" title="What’s new in Iris 1.5"
             >next</a> |</li>
        <li class="right" >
          <a href="1.7.html" title="What’s new in Iris 1.7"
             >previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../contents.html">contents</a>|&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="index.html" >What’s new in Iris</a> &#187;</li> 
      </ul>
    </div>

    <div class="footer">
    <p style="text-align: left; float: left; margin: 0px; padding: 0 0 0 5px;">Documentation licensed under the <a href="http://reference.data.gov.uk/id/open-government-licence" rel="license">Open Government Licence</a></p>
        &copy; <a href="../copyright.html">British Crown Copyright</a> 2010 - 2018, Met Office
    </div>

    <!-- Include a version switcher to easily move between the documentation of different versions -->
    <script type=text/javascript src="/iris/docs/version_switch.js" async></script>

  </body>
</html>